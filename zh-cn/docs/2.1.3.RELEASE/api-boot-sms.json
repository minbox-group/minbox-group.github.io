{
  "filename": "api-boot-sms.md",
  "__html": "<h1>ApiBoot 整合阿里云国际短信服务</h1>\n<p><code>ApiBoot</code>的短信服务模块是由<code>阿里云</code>的国际短信服务提供的，支持国内和国际快速发送验证码、短信通知和推广短信。</p>\n<blockquote>\n<p>前提：需要到阿里云控制台申请开通短信服务。</p>\n</blockquote>\n<h2>引入ApiBoot Alibaba Sms</h2>\n<p>在<code>pom.xml</code>配置文件内添加如下：</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-comment\">&lt;!--ApiBoot Alibaba Sms--&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.minbox.framework<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>api-boot-starter-alibaba-sms<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<blockquote>\n<p>注意：如果未添加<code>ApiBoot</code>版本依赖，请访问<a href=\"/zh-cn/docs/version-rely.html\">版本依赖</a>查看添加方式。</p>\n</blockquote>\n<h2>配置参数列表</h2>\n<table>\n<thead>\n<tr>\n<th>配置参数</th>\n<th>参数介绍</th>\n<th>默认值</th>\n<th>是否必填</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>api.boot.sms.access-key-id</code></td>\n<td>RAM账号的AccessKey ID</td>\n<td>空</td>\n<td>是</td>\n</tr>\n<tr>\n<td><code>api.boot.sms.access-key-secret</code></td>\n<td>RAM账号Access Key Secret</td>\n<td>空</td>\n<td>是</td>\n</tr>\n<tr>\n<td><code>api.boot.sms.sign-name</code></td>\n<td>短信签名</td>\n<td>空</td>\n<td>是</td>\n</tr>\n<tr>\n<td><code>api.boot.sms.connection-timeout</code></td>\n<td>短信发送连接超时时长</td>\n<td>10000</td>\n<td>否</td>\n</tr>\n<tr>\n<td><code>api.boot.sms.read-timeout</code></td>\n<td>短信接收消息连接超时时长</td>\n<td>10000</td>\n<td>否</td>\n</tr>\n<tr>\n<td><code>api.boot.sms.profile</code></td>\n<td>短信区域环境</td>\n<td>default</td>\n<td>否</td>\n</tr>\n</tbody>\n</table>\n<h2>发送短信</h2>\n<p>在<code>ApiBoot Alibaba Sms</code>模块内置了<code>ApiBootSmsService</code>接口实现类，通过<code>send</code>方法即可完成短信发送，如下所示：</p>\n<pre><code class=\"language-java\">\t\t<span class=\"hljs-comment\">/**\n     * logger instance\n     */</span>\n    <span class=\"hljs-keyword\">static</span> Logger logger = LoggerFactory.getLogger(ApiBootSmsTest.class);\n\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> ApiBootSmsService apiBootSmsService;\n\n    <span class=\"hljs-meta\">@Test</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">sendSms</span><span class=\"hljs-params\">()</span> </span>{\n\n        <span class=\"hljs-comment\">// 参数</span>\n        ApiBootSmsRequestParam param = <span class=\"hljs-keyword\">new</span> ApiBootSmsRequestParam();\n        param.put(<span class=\"hljs-string\">\"code\"</span>, <span class=\"hljs-string\">\"192369\"</span>);\n\n        <span class=\"hljs-comment\">// 请求对象</span>\n        ApiBootSmsRequest request = ApiBootSmsRequest.builder().phone(<span class=\"hljs-string\">\"171xxxxx\"</span>).templateCode(<span class=\"hljs-string\">\"SMS_150761253\"</span>).param(param).build();\n\n        <span class=\"hljs-comment\">// 发送短信</span>\n        ApiBootSmsResponse response = apiBootSmsService.send(request);\n        logger.info(<span class=\"hljs-string\">\"短信发送反馈，是否成功：{}\"</span>, response.isSuccess());\n    }\n</code></pre>\n<blockquote>\n<p>短信模板code自行从阿里云控制台获取。</p>\n</blockquote>\n<p>如果在阿里云控制台定义的短信模板存在多个参数，可以通过<code>ApiBootSmsRequestParam#put</code>方法来进行挨个添加，该方法返回值为<code>ApiBootSmsRequestParam</code>本对象。</p>\n<h3>多参数</h3>\n<p>多参数调用如下所示：</p>\n<pre><code class=\"language-java\"><span class=\"hljs-comment\">// 参数</span>\nApiBootSmsRequestParam param = <span class=\"hljs-keyword\">new</span> ApiBootSmsRequestParam();\nparam.put(<span class=\"hljs-string\">\"code\"</span>, <span class=\"hljs-string\">\"192369\"</span>).put(<span class=\"hljs-string\">\"name\"</span>, <span class=\"hljs-string\">\"测试名称\"</span>);\n</code></pre>\n<h3>发送结果反馈</h3>\n<p>执行短信发送后会返回<code>ApiBootSmsResponse</code>实例，通过该实例即可判断短信是否发送成功。</p>\n",
  "link": "/zh-cn/docs/2.1.3.RELEASE/api-boot-sms.html",
  "meta": {
    "title": "ApiBoot Sms 使用文档"
  }
}